<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Scatter Plot Analysis</title>
    <script src='../js/jquery-1.7.min.js' type='text/javascript'></script>
    <script src='../js/highcharts-2.1.7.js' type='text/javascript'></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#render1').click(function() {

                renderData(null, $('#ta1').val());
            });
        });

        function renderData(series, equation) {
            var start = new Date('2011-10-29T10:00:00.000');
            var stop = new Date('2011-10-29T23:59:59.000');
            var socket = new WebSocket('ws://localhost:1081/1.0/event/get');

            socket.onopen = function() {
                console.info("Socket opened");
                socket.send('{"expression":"' + equation + '","start":"' + start.toISOString() + '", "stop": "' + stop.toISOString() + '"}');
            };

            socket.onmessage = function(event) {
                console.info(event.data);
                var d = $.parseJSON(event.data);
                var point = [(new Date(d.time)).getTime(), d.value];
                //series.addPoint(point);
            };
        }

    </script>
</head>
<body>
<!-- <div id='container' style='width: 100%; height: 400px'></div> -->
<div id='series1'>
    <div><textarea id='ta1' cols='80' rows='3'></textarea></div>
    <div>
        <div>Start <input type='text' id='start1'></div>
        <div>Stop <input type='text' id='stop1'></div>
        <div>Shift <input type='text' id='shift1'></div>
    </div>
    <div><input id='render1' type='button' value='Render'/></div>
</div>
</body>
</html>